Version 4.0.0b9
19 July 2004

  -change syntax of MultiSorter's locals parameter.  The previous syntax was 
  fragile and was mostly a holdover from previous versions; it is now a tuple of 
  items, each of which is a 2-tuple of quoted strings.
  -add Python version to --dump output.
  -eliminate redundant _confstring() method in _retrieverbases.py.
  -small documentation updates.

Version 4.0.0b8
18 July 2004

  -documentation updates.
  -include RPM build.  Rapidly approaching release state.

Version 4.0.0b7
17 July 2004

  -changes to an "impossible" error handler in _child_handler(), just in case.
  -move some code from destinations.MultiSorter() into new MultiDestinationBase
  base class.
  -fix MultiDestinationBase._get_destination() 
  -add MultiDestination class to deliver messages to multiple destinations
  unconditionally.
  -cosmetic fixes to output

Version 4.0.0b6
15 July 2004

  -move common child-handling code out of filters and destinations into new
  baseclasses.ForkingBase() class.
  -add __all__ declarations to modules that were missing them, to help prevent
  namespace clutter for others

Version 4.0.0b5
15 July 2004

  -apply the child fix from b3 to Filter_classifier; I missed this in the
  update.  Thanks: Dave Osbourn.
  -cosmetic fix for output describing filters and destination objects.  
  Thanks: Dave Osbourn.
  -catch configuration error of non-multidrop retriever with multidrop-only
  destination.  This broke when I cleaned up the message attribute interface
  in alpha 29.  Thanks: Dominik Kacprzak.

Version 4.0.0b4
14 July 2004

  -remove unneeded code raising a ConfigurationError in Filter_TMDA
  -clean up output for Maildir, Mboxrd destinations and getmail_maildir
  script, messages dropped by filters, various other bits
  -add --show-default-install-dirs to setup.py
  -documentation updates, including more clarification and examples of
  installation options
  -tweak to getmail manpage.  Thanks: Frankye Fattarelli.

Version 4.0.0b3
13 July 2004

  -different fix for the reaping child problem.  This one tested by Paul
  and confirmed working on Mandrake 10's kernel.
  -add Filter_TMDA filter class.
  -changes to setup.py to account for --install-data specifying a non-default
  path for the documentation and man pages

Version 4.0.0b2
13 July 2004

  -documentation fixes regarding installation.  Thanks: Emily Jackson.
  -do environment variable expansion in paths and arguments (before
  substitutions like %(sender), etc) in addition to expanding leading
  ~/ or ~user/ .  Thanks: Paul.
  -try change to code which reaps child processes; the previous code failed
  on a few Linux systems (perhaps the ones where the kernel changed
  fork() behaviour to run the child first?)  Reported by Paul.

Version 4.0.0b1
10 July 2004

  -first beta release
  -add missing os import to getmail_maildir
  -fix received_by in getmail_mbox and don't create Received: header
  -a handful of trivial changes to make the code idiomatically consistent
  -fix to oldmail file writing
  -documentation updates

Version 4.0.0a30
8 July 2004

  -documentation updates
  -change header-adding code from filters to a method in Message class.  Thanks:
  Frankye Fattarelli.
  -make MultiSorter pass retriever info down to its sub-destinations.  This
  fixes a problem reported by Frankye Fattarelli.

Version 4.0.0a29
8 July 2004

  -flesh out the getmailrc-examples file (note that it's been renamed from
  getmailrc-example)
  -clean up message attributes.  Make Message() class.  Move flatten_msg()
  out of utilities and make it into a Message method.  Remove header-length
  checking when generating flattened representation of message.  Change
  callers to use the new class.
  -move SENDER check from deliver_maildir() to getmail_maildir where it
  belongs.
  -update the miscellaneous documentation files
  -last alpha, I think

Version 4.0.0a28
7 July 2004

  -documentation additions and changes.
  -add manpages for getmail, getmail_maildir, getmail_box.  These go in
  PREFIX/man/man1/.

Version 4.0.0a27
4 July 2004

  -documentation fixes and additions.  Split documentation into
  reasonably-sized files.  I need to add inter- and intra-document links
  to most of the documentation yet.
  -add auto-generated tables of contents to each doc file.
  -start flushing out the website with copies of the docs, download directories,
  etc.

Version 4.0.0a26
4 July 2004

  -add explicit checks for multidrop classes to prevent users from incorrectly
  specifying certain header fields as recording the envelope recipient address
  -documentation fixes and additions

Version 4.0.0a25
2 July 2004

  -add handler for KeyboardInterrupt.  Thanks: Thomas Schwinge.
  -change setup script to not error if the specified directory prefix doesn't
  exist.  Thanks: Thomas Schwinge.
  -pass retriever protocol info to filters.  Thanks:  Frankye Fattarelli.
  -first inclusion of "real" documentation.  See docs/documentation.html or its
  plaintext counterpart docs/documentation.txt.

Version 4.0.0a24
1 July 2004

  -setup script/distutils changes.  The setup.py script now looks for
  --prefix or --home specifying an alternate installation directory, and
  otherwise defaults to the hierarchy that Python was installed to.
  /usr/share/doc/ or similar is no longer hardcoded anywhere.

Version 4.0.0a23
1 July 2004

  -changes to MDA_qmaillocal:  add "group" parameter, and make "user"
  parameter also have getmail change UID before invoking qmail-local.
  -change two instances of socket.gethostname() to socket.getfqdn()
  -change localparttranslate to localpart_translate
  -add explicit checks for socket.ssl(), which is optional.  Raise
  getmailConfigurationError if they're not present and the user tries
  to use it.  Thanks: Thomas Schwinge.
  -fix missing received_by in destinations.  Thanks: Frankye Fattarelli and 
  Andrew Raines.

Version 4.0.0a22
30 June 2004

  -MultiSorter default destination can now be a named destination section as
  well, so postmaster mail can go to an external MDA, etc.
  -deliver_maildir writes out a new Return-Path: header field if SENDER
  is set.
  -include getmail_maildir and getmail_mbox delivery scripts for use as
  MDAs with other programs.
  -add starting/finishing log lines for each retriever
  -change eval_bool to raise exception on unexpected values, rather than
  using Python's native idea of what is boolean True and False
  -ensure no message has partial final line regardless of delivery method.
  Thanks: Thomas Schwinge.
  -get rid of msg_lines(), mbox_timestamp() and their only callers.
  -add the Delivered-To: and Received: header creation like getmail v.3 had,
  and boolean options delivered_to and received to allow the user to disable
  them.  This necessitates adding some data attributes to retriever classes
  and additional code to destination classes and utilities.
  Thanks: Thomas Schwinge.
  -drop .py suffix on the name of the main getmail script
  -declare the three scripts to be scripts instead of modules (for distutils)
  -some fixups to the distutils setup script.  If files or directories
  are still installed with "wrong" permissions (like 0600/0700 instead of
  0644/0755), please let me know.
  -a few miscellaneous fixups
  -heading for beta, working on documentation ...

Version 4.0.0a21
27 June 2004

  -leave Return-Path header field alone for program deliveries.  Thanks:
  Andrew Raines.

Version 4.0.0a20
25 June 2004

  -fix typo in Filter_classifier
  -wrap additional exception check around executing subprocesses to ensure
  nonzero exit on error
  -finish MDA_qmaillocal address handling and add strip_delivered_to
  parameter.  Document MDA_qmaillocal.
  -change email module import in utilities.py.  Submit bug report to
  Python bug tracker.  Thanks: Frankye Fattarelli.

Version 4.0.0a19
24 June 2004

  -bring some docstrings, comments, and documentation up to date.
  -add Filter_classifier filter module, to support adding information
  to the message header from programs that don't provide the original message
  back on stdout (like clamscan/clamdscan, apparently).  Thanks: Frankye 
  Fattarelli.
  -missed seek(0) in msg_flatten().  Add missing imports.
  Thanks: Andrew Raines.

Version 4.0.0a18
24 June 2004

  -add msg_flatten(), msg_lines() and use them exclusively to prevent 
  .as_string() from changing header fields for spurious reasons.
  Thanks: Andrew Raines.
  -remove code doing From_-escaping in Mboxrd and let the email module do it.
  -fix copy & paste errors in change_uidgid().  Thanks: Andrew Raines.
  -catch timeouts

Version 4.0.0a17
23 June 2004

  -add exitcodes_keep and exitcodes_drop parameters to Filter_external.
  Thanks: Frankye Fattarelli.

Version 4.0.0a16
23 June 2004

  -add user and group, and allow_root_commands parameters to MDA_external 
  destination and Filter_external filter classes.
  -make import pwd fail gracefully for Windows, etc.
  -add allow_root_commands parameter to MDA_external destination and 
  Filter_external filter classes to force overriding of running external 
  commands as root.
  -pass reference to configparser to retriever, destination, and filters
  -add MultiSorter destination of "[section]" which invokes another 
  destination from the same getmail rc file.  Use this to deliver to programs
  by including an MDA_external destination in a section named [foo] in the
  rc file, then specify that section name in the MultiSorter in the locals
  part, i.e.
    [destination]
    type = MultiSorter
    postmaster = /path/to/maildir/
    locals = joe /path/to/maildir/
      sam /path/to/mbox/
      chris [myprogram]
    [myprogram]
    type = MDA_external
	path = /usr/local/bin/mymda
	arguments = ("--strip-attachments", "-f%(sender)", "--fast")
  Don't try to cause a loop using this to point to itself.  You have been
  warned.
  -MultiSorter is now a little stricter about destination names.  A maildir
  (after any tilde expansion, if applicable) must start with "." or "/" and
  end with "/".  An mboxrd (after any tilde expansion, if applicable) must
  start with "." or "/".  This means if you previous had something like:
    locals = sam@example.net subdir/maildir/
  You'll need to change it to:
    locals = sam@example.net ./subdir/maildir/
  Of course, 
    locals = sam@example.net ~sam/maildir/
  is already okay if sam is a valid user and has a valid home directory.
  -add message_log_syslog
  
Version 4.0.0a15
22 June 2004

  -add summary "Retrieved X messages for ..." for each rc file at program
  close.  Thanks: Frankye Fattarelli.
  -add explicit delete of retriever after quit() to try to force writing
  oldmail file immediately instead of at garbage collection.  Python makes
  no guarantees about when garbage collection takes place, so this won't be
  perfect.  Thanks: Julian Gomez.
  -add message_log
  -add traceback formatting on exception
  -change --dump to include filters.  Change order of operations.

Version 4.0.0a14
22 June 2004

  -fix IMAP-over-SSL.  socket.ssl objects are apparently incompatible with
  socket timeouts, even in the IMAP_SSL class.
  -ensure --trace debugging output doesn't output passwords.  
  Thanks: Julian Gomez.
  -IMAP classes would stop indexing mailboxes when they hit an empty one.
  Fixed.  Thanks: Julian Gomez.

Version 4.0.0a13
21 June 2004

  -add missing default for max_messages_per_session.  Thanks:  Frankye 
  Fattarelli.

Version 4.0.0a12
21 June 2004

  -slight change to quit() to ensure old connections are closed
  and garbage-collected before trying to make new ones.  Thanks:  Frankye 
  Fattarelli.
  -move default documentation directory to /usr/local/share/doc/ .
  -filters.py now checks that the filtered message is at least basically
  sane in that it has a header no shorter than the message it was supplied.
  Let me know if this causes problems.
  -add and document max_messages_per_session

Version 4.0.0a11
21 June 2004

  -add MultidropIMAPRetriever and MultidropIMAPSSLRetriever
  -add move_on_delete parameter to all IMAP retrievers.
  -add and document delete_after and max_message_size options
  -document read_all and delete options
  -rename pop3ssl.py
  -fix --quiet.  i.e., getmail should again operate truly silently if you
  want it to.
  -retrievers' quit() method wasn't getting called.  Fix.  Thanks: Frankye 
  Fattarelli.

Version 4.0.0a10
19 June 2004

  -fix the retrieve-every-other-message bug when delete == True.
  -move base classes out of retrievers.py into _retrieverbases.py
  -fix exception when retrieving mail from an empty IMAP account

Version 4.0.0a9
19 June 2004

  -accidentally edited initialize() in the wrong class; it broke POP3.
  This update should fix it.

Version 4.0.0a8
18 June 2004

  -fix 6 instances of getmailConfirurationError typo in retrievers.py
  -finish basics of IMAP support -- i.e., it successfully retrieves mail.
  delete might not work yet.  IMAP-over-SSL /might/, but the server I was
  testing against wasn't working with SSL (no connection).
  -handle email.Utils.getaddresses returning None.  Thanks:  Frankye Fattarelli.
  -fix default port for MultidropPOP3SSLRetriever.

Version 4.0.0a7
17 June 2004

  -debug and rewrite POP3-over-SSL functionality.  Involved writing around
  some ugly limitations and kludges in Python's socket.ssl and poplib.POP3
  code.  But POP3-over-SSL actually works now, and is fairly clean.
  Let me know if it hangs; I might need to change the way blocking mode is
  handled on the underlying socket.

Version 4.0.0a6
16 June 2004

  -add pseudofile class to implement readline() and sslwrapper to implement
  sendall() on ssl objects.  
  ssl objects in Python don't behave like a file, or like a socket; they're just 
  ... broken. It's a deficiency in the Python standard library.
  This might make POP3-over-SSL work, or it might need more work yet.  I've
  got it talking some SSL, but it hangs at the moment.  Might be blocking
  in read().
  -move Mboxrd file locking to _deliver_message().  Thanks:  Frankye Fattarelli.
  -make --trace more useful and add extra debug info to main script.
  -eliminate noise from defaults in non-[options] section processing
  -found Python's ConfigParser .getboolean() method failed when the passed-in
  default was a non-string.  Maybe I should have stayed with my own
  replacement configuration parser, as it properly handled this case ...
  submitted a patch to the Python bug tracker and added a workaround to
  getmail for the moment.
  -/really/ enable delete and read_all in [options] of rc file.

Version 4.0.0a5
16 June 2004

  -document tuple syntax.  Thanks:  Frankye Fattarelli.
  -fix "filters" name collision in script.  Thanks:  Frankye Fattarelli.

Version 4.0.0a4
15 June 2004

  -fix default values in three classes' parameters which previously relied
  on type conversion.  Thanks: Andrew Raines.
  -fix default port for POP3-over-SSL and "username" parameter in documentation.
  Thanks: Frankye Fattarelli.
  -enable delete and read_all in [options] of rc file.  Change handling of
  verbose.

Version 4.0.0a3
15 June 2004

  -fix typo in processing filters.  Thanks: K. Shantanu.
  -fix typo in processing non-default parameters.  Thanks: Andrew Raines. 
  -document SSL retrievers
  -move retrievers.py configuration functionality into ConfigurableBase class
  -convert filters.py to use ConfigurableBase
  -convert destinations.py to use ConfigurableBase

Version 4.0.0a2
14 June 2004

  -fix default/'default' in filters module.  Thanks: Andrew Raines. 
  -add the mix-in classes for SSL support with POP3 classes.  Meant small
  rewrites to the POP3 classes, but the design should be even cleaner now.

Version 4.0.0a1
14 June 2004

  -first alpha release of getmail version 4


Changes since getmail version 3
-------------------------------

-complete rewrite
-switch to Python version 2.3.3:
  -increased code readability (augmented assignment, list comprehensions,
    string methods, etc)
  -eliminate external modules (ConfParser, timeoutsocket)
  -use standard library modules which have come up to reasonable levels
    of quality and functionality over old custom code (optparse,
    ConfigParser)
  -no longer require workarounds for older, broken standard library modules/
    functions
-modular, object-oriented framework for retrievers, destinations, filters
  allows extensibility
-make more platform-agnostic (transparently support system EOL convention,
  etc)
-support for multiple retriever/account types:
  -POP (single-user, multidrop, SPDS)
  -IMAPv4 (single-user, multidrop)
-full native support for POP3-over-SSL and IMAP-over-SSL.
-configuration (rc) file format changes:
  -support multiple rc files per invocation
  -one mail account per rc file
