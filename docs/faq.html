<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1" />
    <title>getmail frequently-asked questions (FAQs) (version 4)</title>
    <meta name="author" content="Charles Cazabon" />
    <meta name="description" content="Frequently-asked questions about getmail version 4" />
    <meta name="keywords" content="getmail FAQ, getmail 4 FAQ, POP3, IMAP, SSL, domain mailbox, multidrop, fetchmail replacement, message filtering, maildir, mboxrd, MDA" />
    <!--link rel="Contents Up Index" title="Charles Cazabon's Software" href="../" />-->
    <style type="text/css" media="all">@import "getmaildocs.css";</style>
</head>
<body id="top">

<!----><h1 id="title">getmail documentation</h1>
<p class="introduction">
    This is the documentation for getmail version 4.  Version 4 includes
    numerous changes from version 3.x; if you are using getmail version 3,
    please refer to the documentation included with that version of the
    software.
</p>
<p class="about">
    getmail is Copyright &copy; 1998-2004 Charles Cazabon.
</p>
<p class="about">
    getmail is licensed under the
    <a href="COPYING">GNU General Public License version 2</a>
    (only). If you wish to obtain a license to use getmail under other terms,
    please contact me directly.
</p>

<h1 id="toc">Table of Contents</h1>
<ul>
    <li><a href="documentation.html#title">getmail documentation</a></li>
    <li>
        <ul>
        <li><a href="documentation.html#features">Features</a></li>
        <li><a href="documentation.html#v4differences">Differences from previous versions</a></li>
        <li><a href="documentation.html#requirements">Requirements</a></li>
        <li><a href="documentation.html#obtaining">Obtaining getmail</a></li>
        <li><a href="documentation.html#installing">Installing getmail</a></li>
        <li><a href="documentation.html#mailing-lists">getmail mailing lists</a></li>
        </ul>
    </li>
    <li><a href="configuration.html#configuring">Configuring getmail</a></li>
    <li>
        <ul>
        <li><a href="configuration.html#rcfile">Creating a getmail rc file</a></li>
        </ul>
    </li>
    <li><a href="configuration.html#running">Running getmail</a></li>
    <li>
        <ul>
        <li><a href="configuration.html#running-mda">Using getmail as an MDA</a></li>
        </ul>
    </li>
    <li><a href="troubleshooting.html#troubleshooting">Troubleshooting</a></li>
    <li>
        <ul>
        <li><a href="troubleshooting.html#error-messages">Error messages</a></li>
        <li><a href="troubleshooting.html#unexpected-behaviour">Unexpected Behaviour</a></li>
        </ul>
    </li>
    <li><a href="faq.html#faq">Frequently-Asked Questions (FAQs)</a></li>
    <li>
        <ul>
        <li><a href="faq.html#faq-about">About getmail</a></li>
        <li>
            <ul>
            <li><a href="faq.html#faq-about-what">What is getmail?</a></li>
            <li><a href="faq.html#faq-about-support">How can I get support for getmail?</a></li>
            <li><a href="faq.html#faq-about-bug">I think I found a bug!  How do I report it?</a></li>
            <li><a href="faq.html#faq-about-virus">Does getmail support virus scanning of retrieved messages?</a></li>
            <li><a href="faq.html#faq-about-spam">Does getmail support spam filtering of retrieved messages?</a></li>
            <li><a href="faq.html#faq-about-ssl">Does getmail support SSL?</a></li>
            <li><a href="faq.html#faq-about-rewrite">Does getmail rewrite mail headers when it retrieves mail?</a></li>
            <li><a href="faq.html#faq-about-upgrade">Can I upgrade from getmail 3 to getmail 4?  What about my &quot;oldmail&quot; files?</a></li>
            <li><a href="faq.html#faq-about-why">Why did you write getmail?  Why not just use fetchmail?</a></li>
            </ul>
        </li>
        <li><a href="faq.html#faq-configuring">Configuring getmail</a></li>
        <li>
            <ul>
            <li><a href="faq.html#faq-configuring-domain-mailbox">What is a &quot;domain mailbox&quot;?</a></li>
            <li><a href="faq.html#faq-configuring-mta">Do I have to run sendmail or another MTA to use getmail?</a></li>
            </ul>
        </li>
        <li><a href="faq.html#faq-how">How do I &hellip;</a></li>
        <li>
            <ul>
            <li><a href="faq.html#faq-how-no-delivered-to">How do I stop getmail adding a Delivered-To: header to messages?</a></li>
            <li><a href="faq.html#faq-how-no-received">How do I stop getmail adding a Received: header to messages?</a></li>
            <li><a href="faq.html#faq-how-smtp">How do I make getmail deliver messages by re-injecting with SMTP?</a></li>
            <li><a href="faq.html#faq-how-daemon">How do I run getmail in &quot;daemon&quot; mode?</a></li>
            </ul>
        </li>
        <li><a href="faq.html#faq-integrating">Using getmail with other software</a></li>
        <li>
            <ul>
            <li><a href="faq.html#faq-integrating-spamassassin">How do I use getmail with spamassassin?</a></li>
            <li><a href="faq.html#faq-integrating-clamav">How do I use getmail with ClamAV?</a></li>
            <li>
                <ul>
                <li><a href="faq.html#faq-integrating-clamav-prettier">Getting prettier output from ClamAV</a></li>
                </ul>
            </li>
            </ul>
        </li>
        </ul>
    </li>
</ul>

<!--
********************************************************************************
-->

<h1 id="faq">Frequently-Asked Questions (FAQs)</h1>
<p>
    The following questions about getmail come up more-or-less frequently.
</p>

<h2 id="faq-about">About getmail</h2>

<h3 id="faq-about-what">What is getmail?</h3>
<p>
	getmail is a mail retriever with support for POP3, POP3-over-SSL, IMAP4,
	IMAP4-over-SSL, and SPDS mail accounts.  
	It supports normal single-user mail accounts and multidrop (domain)
	mailboxes.
	getmail is written in Python, and licensed under the
	<a href="COPYING">GNU General Public License version 2</a>.
</p>

<h3 id="faq-about-support">How can I get support for getmail?</h3>
<p>
	getmail is
	<a href="http://www.fsf.org/">Free Software</a>.
	As such, it comes with no warranty.  However, I will do my best to support 
	getmail on a voluntary basis through the
	<a href="getmail.html#maillist">getmail mailing list</a>.
</p>
<p>
	If you are using getmail in a commercial or other environment where problems 
	cost money, consider contacting me privately for commercial support.
</p>
<p>
	If you have questions about getmail, the first step is to read the
	<a href="documentation.html">documentation</a>,
	and the remainder of the Frequently Asked Questions. If your question isn't 
	answered there, search the getmail mailing list archives at
	<a href="http://marc.theaimsgroup.com/?l=getmail&amp;r=1&amp;w=2">
	    http://marc.theaimsgroup.com/?l=getmail&amp;r=1&amp;w=2
	</a>.
</p>
<p>
	If you still haven't found an answer to your question, please subscribe to 
	the 
	<a href="documentation.html#mailing-list-users">getmail users' mailing list</a> 
	by sending a blank email to 
	&lt;getmail-subscribe @ discworld.dnsalias.org&gt;
	. If you post your question there, I will see it.  As an additional bonus, 
	your question may be answered by another member of the list.
</p>
	
<h3 id="faq-about-bug">I think I found a bug!  How do I report it?</h3>
<p>
	Ideally, you should join the 
	<a href="documentation.html#mailing-list-users">mailing list</a>
	and send your bug report there.  You should include the following 
	information:
</p>
<ul>
	<li>getmail version</li>
	<li>Python version</li>
	<li>any error message which getmail displayed</li>
	<li>
		the output from running getmail with your normal options plus 
		<span class="sample">--dump</span>
	</li>
	<li>
		if your problem is getmail not determining the proper local recipient, 
		please include the output of running getmail with your normal options 
		plus 
		<span class="sample">--trace</span>,
		showing the retrieval of 
		<strong>one</strong>
		problematic message.
	</li>
</ul>
<p>
	If you absolutely cannot sign up for the mailing list, send the report to me 
	directly. I may not be able to respond to all reports privately, but I will 
	try to address any bugs I find out about this way.
</p>

<h3 id="faq-about-virus">Does getmail support virus scanning of retrieved messages?</h3>
<p>
	Yes.  You can use getmail message filtering options to do this with an 
	external virus scanning program, or invoke your virus scanning program 
	during delivery with getmail's support for external MDAs.
</p>
<p>
	Also see the FAQ about
	<a href="#faq-integrating-clamav">using getmail with the ClamAV program</a>.
</p>

<h3 id="faq-about-spam">Does getmail support spam filtering of retrieved messages?</h3>
<p>
	Yes.  You can use getmail message filtering options to do this with an 
	external spam filtering program, or invoke your spam filtering program 
	during delivery with getmail's support for external MDAs.
</p>
<p>
	Also see the FAQ about
	<a href="#faq-integrating-spamassassin">using getmail with the SpamAssassin program</a>.
</p>

<h3 id="faq-about-ssl">Does getmail support SSL?</h3>
<p>
	Yes.  getmail has built in support for POP3-over-SSL and IMAP4-over-SSL.
</p>

<h3 id="faq-about-rewrite">Does getmail rewrite mail headers when it retrieves mail?</h3>
<p>
	No.  Rewriting message header fields is bad.  getmail will add a new 
	Received: header field and a new Delivered-To: header field, but does not 
	rewrite existing headers.  You can disable the creation of these header 
	fields.
</p>

<h3 id="faq-about-upgrade">Can I upgrade from getmail 3 to getmail 4?  What about my &quot;oldmail&quot; files?</h3>
<p>
	Yes.  getmail version 4 uses exactly the same 
	<span class="file">oldmail-<span class="meta">server</span>-<span class="meta">port</span>-<span class="meta">username</span></span>
	naming convention for its oldmail files.  The only difference is that 
	version 4 escapes a couple of additional characters in this string so that
	it is truly cross-platform compatible.  If you upgrade from version 3 to
	version 4, getmail will still remember which messages you've already 
	retrieved.
</p>
<p>
    To upgrade, do the following:
</p>
<ol>
    <li>
        Rename your old getmail rc file, creating a new file in 
        <span class="file">~/.getmail/getmailrc</span>
        .
    </li>
    <li>
        Create a new
        <span class="file">[options]</span>
        section, containing the appropriate values from your version 3 rc file
        <span class="file">[defaults]</span>
        section.
    </li>
    <li>
        Create a new
        <span class="file">[retriever]</span>
        section, using your previous server configuration values in a new
        <span class="file">type = SimplePOP3Retriever</span>
        or
        <span class="file">type = MultidropPOP3Retriever</span>
        as appropriate.
    </li>
    <li>
        Create a new
        <span class="file">[destination]</span>
        section, using your previous destination path values in a new
        <span class="file">type = Maildir</span>,
        <span class="file">type = Mboxrd</span>,
        <span class="file">type = MDA_external</span>,
        or        
        <span class="file">type = MultiSorter</span>
        destination as appropriate.
    </li>
    <li>
        If you were retrieving messages from multiple mail accounts in a 
        single version 3 getmail rc file, split them up into one account per
        version 4 rc file.
    </li>
</ol>
<p>
    That's it.
</p>

<h3 id="faq-about-why">Why did you write getmail?  Why not just use fetchmail?</h3>
<p>
	I do not like some of the design choices which were made with fetchmail. 
	getmail does things a little differently, and for my purposes, better. In 
	addition, most people find getmail easier to configure and use than 
	fetchmail.  Perhaps most importantly, getmail goes to great lengths to 
	ensure that mail is never lost, while fetchmail (in its default 
	configuration) frequently loses mail, causes mail loops, bounces legitimate 
	messages, and causes many other problems.
</p>
<p>
	fetchmail's default configuration values frequently cause lost or
	misdirected mail, and seem to be chosen to cause maximum pain and
	inconvenience.  From fetchmail's to-do file (emphasis mine):
</p>
<blockquote>
	<p>
		<em>Maybe</em> refuse multidrop configuration unless 
		&quot;envelope&quot; is _explicitly_ configured
		&hellip;
		This would prevent a significant class of shoot-self-in-foot 
		problems.
	</p>
	<p>
		<em>perhaps</em> treat a delivery as &quot;temporarily failed&quot;
		&hellip;
		This is so you don't lose mail if you configure the wrong envelope
		header.
	</p>
</blockquote>
<p>
	fetchmail is famous for mangling messages it retrieves, rather than
	leaving them alone as a mail-handling program should.  getmail will add
	trace information to messages (so you can see what happened, and when),
	but will otherwise leave message content alone.
</p>
<p>
	In addition, fetchmail has a long history of security problems:
</p>
<ul>
	<li>
		versions released before 20 June 2001 contain a buffer overflow, which 
		can be remotely exploited (see 
		<a href="http://www.securityfocus.com/bid/2877">www.securityfocus.com/bid/2877</a>
		for details).  getmail is not vulnerable to buffer overflows, because 
		buffers in Python are dynamically sized.
	</li>
	<li>
		Another remotely-exploitable security hole discovered in fetchmail in June 2002;
		<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2002-0146">
		    versions prior to 5.9.10 (released in June 2002) are exploitable
		</a>.
	</li>
	<li>
		Reading fetchmail's UPDATES file, it appears that another security 
		problem was fixed in 5.9.12, where a server could crash fetchmail on 
		64-bit platforms.  Also worrying is a mention that it includes a fix for 
		&quot;password shrouding&quot;.
	</li>
	<li>
		Another remotely-exploitable security hole in fetchmail discovered in 
		September 2002; 
		<a href="http://security.e-matters.de/advisories/032002.html">
		    this hole
		</a>
		lets an attacker run arbitrary code on the victim's computer.
	</li>
	<li>
		Another remotely-exploitable security hole in fetchmail discovered in 
		December 2002; once again, a remote attacker can run arbitrary code on 
		the machine running fetchmail in its default configuration.  See 
		<a href="http://security.e-matters.de/advisories/052002.html">
		    this advisory
		</a>
		for details.
	</li>
	<li>
		January 2003: 
		<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=3DCAN-2002-1365">
		    More buffer overflows in fetchmail let attackers run arbitrary code
		</a>.
	</li>
	<li>
		October 2003: 
		<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2003-0792">
		    Anyone can cause fetchmail to crash by sending you a message
		</a>.
		Other problems are
		<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2003-0790">
		    here
		</a>,
		and
		<a href="http://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=fetchmail">
		    I might have missed some
		</a>.
	</li>
</ul>
<p>
	I've given up even trying to stay abreast of the various security holes in 
	fetchmail.
</p>
<p>
	But don't just take my word for it; see
	<a href="http://docs.freebsd.org/cgi/mid.cgi?200102172349.QAA11724">
	    http://docs.freebsd.org/cgi/mid.cgi?200102172349.QAA11724
	</a>.
</p>
<p>
	getmail users have not had to worry about any of these security holes.
</p>

<h2 id="faq-configuring">Configuring getmail</h2>

<h3 id="faq-configuring-domain-mailbox">What is a &quot;domain mailbox&quot;?</h3>
<p>
	A domain (or multidrop) mailbox is a POP3 mailbox which receives mail for 
	all users in a given domain.  Normal mailboxes contain mail for a single 
	user (like 
	<span class="file">jason@myisp.co.uk</span>
	); some Internet Service Providers which provide webhosting or other 
	services will provide a POP3 mailbox which receives mail for all addresses 
	in a given domain (i.e. mail for
	<span class="file">service@smallcompany.net</span>,
	<span class="file">sales@smallcompany.net</span>,
	and indeed anything
	<span class="file">@smallcompany.net</span>
	ends up in the same POP3 mailbox).
</p>
<p>
	getmail provides a method of retrieving mail from a domain mailbox and 
	distributing it among the various users automatically.  The retriever 
	classes
	<a href="configuration.html#retriever-multidroppop3">MultidropPOP3Retriever</a>
	,
	<a href="configuration.html#retriever-multidroppop3ssl">MultidropPOP3SSLRetriever</a>
	,
	<a href="configuration.html#retriever-multidropspds">MultidropSPDSRetriever</a>
	,
	<a href="configuration.html#retriever-multidropimap">MultidropIMAPRetriever</a>
	, and
	<a href="configuration.html#retriever-multidropimapssl">MultidropIMAPSSLRetriever</a>
	provide this capability.
</p>

<h3 id="faq-configuring-mta">Do I have to run sendmail or another MTA to use getmail?</h3>
<p>
	No.  getmail delivers directly to maildirs, mboxrd files, or via arbitrary 
	MDAs, and never injects mail via SMTP, so no MTA is necessary.
</p>

<h2 id="faq-how">How do I &hellip;</h2>

<h3 id="faq-how-no-delivered-to">How do I stop getmail adding a Delivered-To: header to messages?</h3>
<p>
	Use the 
	<a href="configuration.html#conf-options">delivered_to</a>
	<span class="file">[options]</span>
	parameter.
</p>

<h3 id="faq-how-no-received">How do I stop getmail adding a Received: header to messages?</h3>
<p>
	Use the 
	<a href="configuration.html#conf-options">received</a>
	<span class="file">[options]</span>
	parameter.
</p>

<h3 id="faq-how-smtp">How do I make getmail deliver messages by re-injecting with SMTP?</h3>
<p>
	You don't need to.  getmail can deliver to maildirs, mboxrd files, or 
	through arbitrary external MDAs.
</p>
<p>
	If you still think you need to, you can use getmail's external MDA
	support to do so.
</p>

<h3 id="faq-how-daemon">How do I run getmail in &quot;daemon&quot; mode?</h3>
<p>
	Use your system's cron utility to run getmail periodically if you wish to 
	have mail retrieved automatically at intervals.  This is precisely what cron 
	is designed to do; there's no need to add special code to getmail to do 
	this.
</p>

<h2 id="faq-integrating">Using getmail with other software</h2>
<p>
    getmail user Frankye Fattarelli contributed to the following questions
    about integrating getmail with SpamAssassin and ClamAV.
</p>

<h3 id="faq-integrating-spamassassin">How do I use getmail with spamassassin?</h3>
<p>
    <a href="http://useast.spamassassin.org/index.html">SpamAssassin</a>
    can be run in standalone mode or in a client/server configuration.
    In both configurations, SpamAssassin accepts a wide variety of arguments;
    please refer to SpamAssassin's manual pages or
    <a href="http://useast.spamassassin.org/doc.html">online documentation</a>
    for details.
</p>
<p>
    To filter messages through SpamAssassin in a client/server configuration
    (i.e. with the 
    <span class="file">spamd</span>
    daemon), use a configuration like this:
</p>
<pre class="example">
[filter]
type = Filter_external
path = /usr/local/bin/spamc
arguments = (&quot;-s 10000&quot;, )
</pre>
<p>
    The value supplied to the
    <span class="file">-s</span>
    option is the maximum message size accepted (in bytes).  The default
    is 250k.
</p>
<p>
    A similar configuration without the
    <span class="file">spamd</span>
    daemon would be:
</p>
<pre class="example">
[filter]
type = Filter_external
path = /usr/local/bin/spamassassin
arguments = (&quot;--report&quot;, )
</pre>
<p>
    The
    <span class="file">--report</span>
    option sends the message to the various spam-blocker databases and tags it 
    as spam in your bayesian database.
</p>
<p>
    Note that if you are using Bayesian (learning) filtering, and you've put
    your SpamAssassin filter 
    <em>after</em>
    any getmail 
    <span class="file">Filter_classifier</span>,
    you may have a problem with your learning filter learning getmail's
    header fields.  That is, the headers added by the other filters may get
    learned, and affect your database.  To prevent this, ensure that
    SpamAssassin ignores these fields by adding the following to your
    SpamAssassin configuration:
</p>
<pre class="example">
bayes_ignore_header X-getmail-filter-classifier
</pre>

<h3 id="faq-integrating-clamav">How do I use getmail with ClamAV?</h3>
<p>
    <a href="http://www.clamav.net/">ClamAV</a>,
    like SpamAssassin, can by used in standalone or client/server 
    configurations.
</p>
<p>
    To use ClamAV without the
    <span class="file">clamd</span>
    daemon, use a filter configuration like this:
</p>
<pre class="example">
[filter]
type = Filter_classifier
path = /usr/local/bin/clamscan
arguments = (&quot;--stdout&quot;, &quot;--no-summary&quot;,
    &quot;--mbox&quot;, &quot;--infected&quot;, &quot;-&quot;)
exitcodes_drop = (1,)
</pre>
<p>
    The above assumes you do
    <em>not</em>
    want the infected emails to be delivered.  If you do want them delivered,
    you would use a slightly different configuration:
</p>
<pre class="example">
[filter]
type = Filter_classifier
path = /usr/local/bin/clamscan
arguments = (&quot;--stdout&quot;, &quot;--no-summary&quot;,
    &quot;--mbox&quot;, &quot;--infected&quot;, &quot;-&quot;)
exitcodes_keep = (0,1)
</pre>
<p>
    To use ClamAV with the
    <span class="file">clamd</span>
    daemon, use a filter configuration like this:
</p>
<pre class="example">
[filter]
type = Filter_classifier
path = /usr/local/bin/clamdscan
arguments = (&quot;--stdout&quot;, &quot;--disable-summary&quot;, &quot;-&quot;)
exitcodes_drop = (1, )
</pre>
<p>
    As with Clamscan (above), if you do want the infected messages delivered
    instead of dropped, you should modify your configuration as follows:
</p>
<pre class="example">
[filter]
type = Filter_classifier
path = /usr/local/bin/clamdscan
arguments = (&quot;--stdout&quot;, &quot;--disable-summary&quot;, &quot;-&quot;)
exitcodes_keep = (0,1)
</pre>
<p>
    You may find it necessary to specify the paths of some decompression
    utilities used by ClamAV with additional arguments like:
</p>
<pre class="example">
arguments = ( &hellip;,
    &quot;--unzip=/usr/local/bin/unzip&quot;,
    &quot;--unrar=/usr/local/bin/unrar&quot;,
    &quot;--unarj=/usr/local/bin/unarj&quot;,
    &quot;--lha=/usr/local/bin/lha&quot;,
    &quot;--jar=/usr/local/bin/unzip&quot;,
    &quot;--tar=/usr/bin/tar&quot;,
    &quot;--tgz=/usr/bin/tar&quot;
</pre>
<p>
    Note: if you want to use the daemonized (client/server) version of ClamAV,
    ensure that your
    <span class="file">clamav.conf</span>
    file contains:
</p>
<pre class="example">
ScanMail
</pre>
<p>
    The paths to the various decompression utilities must be specified in this
    file as well.
</p>

<h4 id="faq-integrating-clamav-prettier">Getting prettier output from ClamAV</h4>
<p>
    Using getmail's Filter_classifier, the output of your filtering program
    (in this case ClamAV) is placed into a
    <span class="file">X-getmail-filter-classifier:</span>
    header field in the message.  This can make auditing the actions of
    filters difficult if you use multiple filters and cannot tell which
    filter added which line.
</p>
<p>
    To correct this, you can use an additional filter to change the name of
    the added filter header lines immediately after each filter is run.
    For example, 
    <span class="file">reformail</span>,
    from the 
    <a href="http://www.flounder.net/~mrsam/maildrop/">maildrop</a>
    package (which is in turn part of the
    <a href="http://www.courier-mta.org/">Courier MTA</a>
    ) can be used in this fashion to rename the added header fields
    (say, to &quot;X-mypersonalmailscan&quot;) with a filter configuration
    like this:
</p>
<pre class="example">
type = Filter_external
path = /usr/local/bin/reformail
arguments = (&quot;-R&quot;, &quot;X-getmail-filter-classifier:&quot;,
    &quot;X-mypersonalmailscan:&quot;)
</pre>
<p>
    Simply ensure ClamAV is invoked as the first filter, and this is invoked
    as the second filter (or immediately after the ClamAV filter, if it is
    the second, third, etc. filter).
</p>

<!--#include virtual="footer.html"-->

</body>
</html>
